#!/usr/bin/env bash
REDIS_CONFIG_FILE="${REDIS_CONFIG_FILE:-$HOME/.redis_config}"
FISH_SCRIPT_PATH="$(brew --prefix)/share/redish/fish/functions/redish.fish"

if ! command -v fish >/dev/null; then
  echo "ERROR: fish shell is required for redish."
  exit 1
fi

fish --private --command "
  set -x REDIS_CONFIG_FILE '$REDIS_CONFIG_FILE'
  source '$FISH_SCRIPT_PATH'
  redis $argv
"